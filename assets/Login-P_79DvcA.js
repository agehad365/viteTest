import{r as l,U as w,u as p,a as v,j as e,b as j}from"./index-BYhn9ksx.js";import{c as b,a as n}from"./index.esm-D-NKZmR1.js";function A(){let{setUserLogin:c}=l.useContext(w);const[i,u]=l.useState(null),[x,d]=l.useState(!1);let h=p();function g(o){d(!0),console.log("Password entered:",o.password),j.post("https://ecommerce.routemisr.com/api/v1/auth/signin",o).then(a=>{var t,r,m;d(!1),console.log((t=a==null?void 0:a.data)==null?void 0:t.token),console.log(a==null?void 0:a.data),a.data.message==="success"&&(c((r=a==null?void 0:a.data)==null?void 0:r.token),localStorage.setItem("usertoken",(m=a==null?void 0:a.data)==null?void 0:m.token),h("/"))}).catch(a=>{var t,r;d(!1),u((r=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:r.message),console.log(a)})}let f=b().shape({email:n().required("email is required").email("invalid email"),password:n().required("password is required").matches(/^[A-Z][a-z0-9]{4,10}$/,"invalid password")}),s=v({initialValues:{email:"",password:""},onSubmit:g,validationSchema:f});return l.useEffect(()=>{},[]),e.jsx(e.Fragment,{children:e.jsx("div",{className:" bg-gray-100 flex h-screen items-center justify-center px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full max-w-md space-y-8",children:e.jsxs("div",{className:"bg-white shadow-md rounded-md p-6",children:[e.jsx("img",{className:"mx-auto h-12 w-auto text-green-900",src:"https://www.svgrepo.com/show/499664/user-happy.svg"}),e.jsx("h2",{className:"my-3 text-center text-3xl font-bold tracking-tight text-green-900",children:"Login Now"}),e.jsxs("form",{onSubmit:s.handleSubmit,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:s.values.email,onBlur:s.handleBlur,onChange:s.handleChange,name:"email",id:"email",type:"email-address",autoComplete:"email-address",required:!0,className:"px-2 py-3 mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500 sm:text-sm"})}),s.touched.email&&s.errors.email?e.jsxs("div",{className:"bg-red-200 px-6 py-3 mx-2 my-1.5 rounded-md  text-lg flex items-center mx-auto max-w-lg",children:[e.jsx("svg",{viewBox:"0 0 24 24",className:"text-red-600 w-5 h-5 sm:w-5 sm:h-5 mr-3",children:e.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})}),e.jsxs("span",{className:"text-red-800",children:[" ",s.touched.email&&s.errors.email]})]}):null]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:s.values.password,onBlur:s.handleBlur,onChange:s.handleChange,name:"password",id:"password",type:"password",autoComplete:"password",required:!0,className:"px-2 py-3 mt-1 block w-full rounded-md border border-gray-300 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500 sm:text-sm"})}),s.touched.password&&s.errors.password?e.jsxs("div",{className:"bg-red-200 px-6 py-3 mx-2 my-1.5 rounded-md  text-lg flex items-center mx-auto max-w-lg",children:[e.jsx("svg",{viewBox:"0 0 24 24",className:"text-red-600 w-5 h-5 sm:w-5 sm:h-5 mr-3",children:e.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})}),e.jsxs("span",{className:"text-red-800",children:[" ",s.touched.password&&s.errors.password]})]}):null]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"flex w-full justify-center rounded-md border border-transparent bg-green-400 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-opacity-75 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2",children:x?e.jsx("i",{className:"fas fa-spinner fa-spin"}):"Login Account"})}),i?e.jsxs("div",{className:"bg-red-200 px-6 py-3 mx-2 my-1.5 rounded-md  text-lg flex items-center mx-auto max-w-lg",children:[e.jsx("svg",{viewBox:"0 0 24 24",className:"text-red-600 w-5 h-5 sm:w-5 sm:h-5 mr-3",children:e.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})}),e.jsxs("span",{className:"text-red-800",children:[" ",i]})]}):null]})]})})})})}export{A as default};
